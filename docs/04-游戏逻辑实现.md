# ğŸ® æ¸¸æˆé€»è¾‘å®ç°

æœ¬ç« å°†å®ç°çŒœæ•°å­—æ¸¸æˆçš„æ ¸å¿ƒé€»è¾‘ï¼ŒåŒ…æ‹¬æ¸¸æˆä¸»å¾ªç¯ã€éšæœºæ•°ç”Ÿæˆã€ç”¨æˆ·äº¤äº’ç­‰å…³é”®åŠŸèƒ½ã€‚

## 1. éšæœºæ•°ç”Ÿæˆ

### ç†è§£éšæœºæ•°ç”Ÿæˆ
```go
import (
    "math/rand"
    "time"
)

// è®¾ç½®éšæœºæ•°ç§å­
func initRandom() {
    rand.Seed(time.Now().UnixNano())
}

// ç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•°
func generateRandomNumber(min, max int) int {
    return rand.Intn(max-min+1) + min
}

// ç¤ºä¾‹ï¼šç”Ÿæˆ 1-100 ä¹‹é—´çš„éšæœºæ•°
func generateTargetNumber() int {
    return generateRandomNumber(1, 100)
}
```

### éšæœºæ•°ç§å­çš„é‡è¦æ€§
```go
// ä¸è®¾ç½®ç§å­çš„é—®é¢˜æ¼”ç¤º
func badRandomExample() {
    for i := 0; i < 5; i++ {
        fmt.Println(rand.Intn(100) + 1)
    }
    // æ¯æ¬¡è¿è¡Œç¨‹åºéƒ½ä¼šäº§ç”Ÿç›¸åŒçš„åºåˆ—
}

// æ­£ç¡®çš„éšæœºæ•°ç”Ÿæˆ
func goodRandomExample() {
    rand.Seed(time.Now().UnixNano()) // ä½¿ç”¨å½“å‰æ—¶é—´ä½œä¸ºç§å­
    for i := 0; i < 5; i++ {
        fmt.Println(rand.Intn(100) + 1)
    }
    // æ¯æ¬¡è¿è¡Œç¨‹åºéƒ½ä¼šäº§ç”Ÿä¸åŒçš„åºåˆ—
}
```

## 2. æ¸¸æˆä¸»å¾ªç¯è®¾è®¡

### æ¸¸æˆæµç¨‹åˆ†æ
```
å¼€å§‹æ¸¸æˆ
    â†“
ç”Ÿæˆç›®æ ‡æ•°å­—
    â†“
æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
    â†“
â”Œâ”€â†’ è·å–ç”¨æˆ·è¾“å…¥
â”‚   â†“
â”‚   éªŒè¯è¾“å…¥
â”‚   â†“
â”‚   æ¯”è¾ƒçŒœæµ‹ä¸ç›®æ ‡
â”‚   â†“
â”‚   æ˜¾ç¤ºåé¦ˆä¿¡æ¯
â”‚   â†“
â”‚   å¢åŠ çŒœæµ‹æ¬¡æ•°
â”‚   â†“
â”‚   æ£€æŸ¥æ˜¯å¦çŒœå¯¹ â”€â”€â†’ æ˜¯ï¼šæ˜¾ç¤ºæˆåŠŸä¿¡æ¯ï¼Œç»“æŸæ¸¸æˆ
â”‚   â†“
â””â”€â”€ å¦ï¼šç»§ç»­å¾ªç¯
```

### Start æ–¹æ³•å®ç°
```go
// Start å¼€å§‹æ¸¸æˆ
func (g *Game) Start() {
    fmt.Println("æ¬¢è¿æ¥åˆ°çŒœæ•°å­—æ¸¸æˆï¼")
    fmt.Println("æˆ‘å·²ç»æƒ³å¥½äº†ä¸€ä¸ª 1-100 ä¹‹é—´çš„æ•°å­—ï¼Œè¯·å¼€å§‹çŒœæµ‹ï¼š")
    
    // æ¸¸æˆä¸»å¾ªç¯
    for {
        // è·å–ç©å®¶çŒœæµ‹
        guess, err := g.getPlayerGuess()
        if err != nil {
            fmt.Printf("è¾“å…¥é”™è¯¯ï¼š%vï¼Œè¯·é‡æ–°è¾“å…¥ã€‚\n", err)
            continue // è¾“å…¥é”™è¯¯æ—¶ä¸å¢åŠ çŒœæµ‹æ¬¡æ•°ï¼Œç»§ç»­å¾ªç¯
        }
        
        // å¢åŠ çŒœæµ‹æ¬¡æ•°
        g.attempts++
        
        // æ£€æŸ¥çŒœæµ‹ç»“æœ
        result := g.checkGuess(guess)
        
        // æ ¹æ®ç»“æœç»™å‡ºåé¦ˆ
        if result == 0 {
            // çŒœå¯¹äº†ï¼Œæ¸¸æˆç»“æŸ
            fmt.Printf("æ­å–œä½ ï¼çŒœå¯¹äº†ï¼ä½ æ€»å…±çŒœäº† %d æ¬¡ã€‚\n", g.attempts)
            break
        } else if result > 0 {
            fmt.Println("å¤ªå¤§äº†ï¼è¯·å†è¯•ä¸€æ¬¡ã€‚")
        } else {
            fmt.Println("å¤ªå°äº†ï¼è¯·å†è¯•ä¸€æ¬¡ã€‚")
        }
    }
}
```

## 3. è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

### è¾“å…¥éªŒè¯ç­–ç•¥
```go
// getPlayerGuess è·å–ç©å®¶çš„çŒœæµ‹è¾“å…¥
func (g *Game) getPlayerGuess() (int, error) {
    fmt.Print("è¯·è¾“å…¥ä½ çš„çŒœæµ‹ï¼š")
    
    // ç¬¬ä¸€å±‚éªŒè¯ï¼šè¯»å–è¾“å…¥æ˜¯å¦æˆåŠŸ
    if !g.scanner.Scan() {
        return 0, fmt.Errorf("è¯»å–è¾“å…¥å¤±è´¥")
    }
    
    // ç¬¬äºŒå±‚éªŒè¯ï¼šè¾“å…¥æ˜¯å¦ä¸ºç©º
    input := strings.TrimSpace(g.scanner.Text())
    if input == "" {
        return 0, fmt.Errorf("è¾“å…¥ä¸èƒ½ä¸ºç©º")
    }
    
    // ç¬¬ä¸‰å±‚éªŒè¯ï¼šæ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—
    guess, err := strconv.Atoi(input)
    if err != nil {
        return 0, fmt.Errorf("è¯·è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—")
    }
    
    // ç¬¬å››å±‚éªŒè¯ï¼šæ•°å­—æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…
    if guess < 1 || guess > 100 {
        return 0, fmt.Errorf("æ•°å­—å¿…é¡»åœ¨ 1-100 ä¹‹é—´")
    }
    
    return guess, nil
}
```

### é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
```go
// å®šä¹‰å¸¸é‡é”™è¯¯ä¿¡æ¯
const (
    ErrEmptyInput    = "è¾“å…¥ä¸èƒ½ä¸ºç©º"
    ErrInvalidNumber = "è¯·è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—"
    ErrOutOfRange    = "æ•°å­—å¿…é¡»åœ¨ 1-100 ä¹‹é—´"
    ErrReadFailed    = "è¯»å–è¾“å…¥å¤±è´¥"
)

// ä½¿ç”¨é¢„å®šä¹‰é”™è¯¯
func (g *Game) getPlayerGuessImproved() (int, error) {
    fmt.Print("è¯·è¾“å…¥ä½ çš„çŒœæµ‹ï¼š")
    
    if !g.scanner.Scan() {
        return 0, fmt.Errorf(ErrReadFailed)
    }
    
    input := strings.TrimSpace(g.scanner.Text())
    if input == "" {
        return 0, fmt.Errorf(ErrEmptyInput)
    }
    
    guess, err := strconv.Atoi(input)
    if err != nil {
        return 0, fmt.Errorf(ErrInvalidNumber)
    }
    
    if guess < 1 || guess > 100 {
        return 0, fmt.Errorf(ErrOutOfRange)
    }
    
    return guess, nil
}
```

## 4. æ¸¸æˆçŠ¶æ€ç®¡ç†

### æ¯”è¾ƒç®—æ³•å®ç°
```go
// checkGuess æ£€æŸ¥çŒœæµ‹ç»“æœ
// è¿”å›å€¼ï¼š0 è¡¨ç¤ºçŒœå¯¹ï¼Œæ­£æ•°è¡¨ç¤ºçŒœå¤§äº†ï¼Œè´Ÿæ•°è¡¨ç¤ºçŒœå°äº†
func (g *Game) checkGuess(guess int) int {
    switch {
    case guess == g.targetNumber:
        return 0  // çŒœå¯¹äº†
    case guess > g.targetNumber:
        return 1  // çŒœå¤§äº†
    default:
        return -1 // çŒœå°äº†
    }
}

// æˆ–è€…ä½¿ç”¨æ›´ç›´è§‚çš„æ–¹å¼
func (g *Game) checkGuessVerbose(guess int) string {
    if guess == g.targetNumber {
        return "correct"
    } else if guess > g.targetNumber {
        return "too_high"
    } else {
        return "too_low"
    }
}
```

### æ¸¸æˆåé¦ˆç³»ç»Ÿ
```go
// provideFeedback æ ¹æ®æ¯”è¾ƒç»“æœæä¾›åé¦ˆ
func (g *Game) provideFeedback(result int) {
    switch result {
    case 0:
        fmt.Printf("ğŸ‰ æ­å–œä½ ï¼çŒœå¯¹äº†ï¼ä½ æ€»å…±çŒœäº† %d æ¬¡ã€‚\n", g.attempts)
    case 1:
        fmt.Println("ğŸ“ˆ å¤ªå¤§äº†ï¼è¯·å†è¯•ä¸€æ¬¡ã€‚")
    case -1:
        fmt.Println("ğŸ“‰ å¤ªå°äº†ï¼è¯·å†è¯•ä¸€æ¬¡ã€‚")
    }
}

// å¸¦æœ‰æ›´è¯¦ç»†åé¦ˆçš„ç‰ˆæœ¬
func (g *Game) provideFeedbackDetailed(guess, result int) {
    switch result {
    case 0:
        fmt.Printf("ğŸ‰ æ­å–œä½ ï¼çŒœå¯¹äº†ï¼ç­”æ¡ˆå°±æ˜¯ %dï¼Œä½ æ€»å…±çŒœäº† %d æ¬¡ã€‚\n", 
                   guess, g.attempts)
    case 1:
        fmt.Printf("ğŸ“ˆ %d å¤ªå¤§äº†ï¼ç›®æ ‡æ•°å­—æ¯”è¿™ä¸ªå°ã€‚\n", guess)
    case -1:
        fmt.Printf("ğŸ“‰ %d å¤ªå°äº†ï¼ç›®æ ‡æ•°å­—æ¯”è¿™ä¸ªå¤§ã€‚\n", guess)
    }
}
```

## 5. å¤šè½®æ¸¸æˆæ”¯æŒ

### ç»§ç»­æ¸¸æˆè¯¢é—®
```go
// askContinue è¯¢é—®æ˜¯å¦ç»§ç»­æ¸¸æˆ
func askContinue() bool {
    scanner := bufio.NewScanner(os.Stdin)
    
    for {
        fmt.Print("æ˜¯å¦ç»§ç»­æ¸¸æˆï¼Ÿ(y/n)ï¼š")
        
        if !scanner.Scan() {
            fmt.Println("è¯»å–è¾“å…¥å¤±è´¥ï¼Œé»˜è®¤é€€å‡ºæ¸¸æˆã€‚")
            return false
        }
        
        input := strings.ToLower(strings.TrimSpace(scanner.Text()))
        
        switch input {
        case "y", "yes", "æ˜¯", "ç»§ç»­":
            return true
        case "n", "no", "å¦", "é€€å‡º":
            return false
        default:
            fmt.Println("è¯·è¾“å…¥ y(æ˜¯) æˆ– n(å¦)ã€‚")
        }
    }
}
```

### ä¸»ç¨‹åºå¾ªç¯
```go
// main ä¸»å‡½æ•°
func main() {
    // æ˜¾ç¤ºæ¸¸æˆæ ‡é¢˜
    fmt.Println(strings.Repeat("=", 50))
    fmt.Println("ğŸ¯ Go è¯­è¨€çŒœæ•°å­—æ¸¸æˆ")
    fmt.Println(strings.Repeat("=", 50))

    // æ¸¸æˆä¸»å¾ªç¯
    for {
        // åˆ›å»ºæ–°æ¸¸æˆå®ä¾‹
        game := NewGame()
        
        // å¼€å§‹æ¸¸æˆ
        game.Start()

        // è¯¢é—®æ˜¯å¦ç»§ç»­
        if !askContinue() {
            fmt.Println("æ„Ÿè°¢æ¸¸æˆï¼å†è§ï¼ğŸ‘‹")
            break
        }

        // æ˜¾ç¤ºæ–°æ¸¸æˆå¼€å§‹æç¤º
        fmt.Println("\n" + strings.Repeat("=", 30))
        fmt.Println("å¼€å§‹æ–°æ¸¸æˆï¼")
        fmt.Println(strings.Repeat("=", 30))
    }
}
```

## 6. æ¸¸æˆä½“éªŒä¼˜åŒ–

### ç”¨æˆ·ç•Œé¢ç¾åŒ–
```go
// displayWelcome æ˜¾ç¤ºæ¬¢è¿ç•Œé¢
func displayWelcome() {
    fmt.Println(strings.Repeat("=", 50))
    fmt.Println("ğŸ¯ Go è¯­è¨€çŒœæ•°å­—æ¸¸æˆ")
    fmt.Println(strings.Repeat("=", 50))
    fmt.Println("æ¸¸æˆè§„åˆ™ï¼š")
    fmt.Println("â€¢ æˆ‘ä¼šæƒ³ä¸€ä¸ª 1-100 ä¹‹é—´çš„æ•°å­—")
    fmt.Println("â€¢ ä½ éœ€è¦çŒœå‡ºè¿™ä¸ªæ•°å­—")
    fmt.Println("â€¢ æˆ‘ä¼šå‘Šè¯‰ä½ çŒœæµ‹æ˜¯å¤ªå¤§è¿˜æ˜¯å¤ªå°")
    fmt.Println("â€¢ å°½é‡ç”¨æœ€å°‘çš„æ¬¡æ•°çŒœä¸­ï¼")
    fmt.Println(strings.Repeat("-", 50))
}

// displayGameStart æ˜¾ç¤ºæ¸¸æˆå¼€å§‹ä¿¡æ¯
func (g *Game) displayGameStart() {
    fmt.Println("æ¬¢è¿æ¥åˆ°çŒœæ•°å­—æ¸¸æˆï¼")
    fmt.Println("æˆ‘å·²ç»æƒ³å¥½äº†ä¸€ä¸ª 1-100 ä¹‹é—´çš„æ•°å­—ï¼Œè¯·å¼€å§‹çŒœæµ‹ï¼š")
}

// displayGameEnd æ˜¾ç¤ºæ¸¸æˆç»“æŸä¿¡æ¯
func (g *Game) displayGameEnd() {
    fmt.Printf("ğŸ‰ æ­å–œä½ ï¼çŒœå¯¹äº†ï¼\n")
    fmt.Printf("ğŸ“Š æ¸¸æˆç»Ÿè®¡ï¼š\n")
    fmt.Printf("   â€¢ çŒœæµ‹æ¬¡æ•°ï¼š%d\n", g.attempts)
    fmt.Printf("   â€¢ ç›®æ ‡æ•°å­—ï¼š%d\n", g.targetNumber)
    
    // æ ¹æ®çŒœæµ‹æ¬¡æ•°ç»™å‡ºè¯„ä»·
    switch {
    case g.attempts <= 3:
        fmt.Println("   â€¢ è¯„ä»·ï¼šğŸ† å¤ªå‰å®³äº†ï¼")
    case g.attempts <= 6:
        fmt.Println("   â€¢ è¯„ä»·ï¼šğŸ‘ å¾ˆä¸é”™ï¼")
    case g.attempts <= 10:
        fmt.Println("   â€¢ è¯„ä»·ï¼šğŸ˜Š è¿˜å¯ä»¥ï¼")
    default:
        fmt.Println("   â€¢ è¯„ä»·ï¼šğŸ’ª ç»§ç»­åŠ æ²¹ï¼")
    }
}
```

### è¾“å…¥æç¤ºä¼˜åŒ–
```go
// getPlayerGuessWithHints å¸¦æç¤ºçš„è¾“å…¥è·å–
func (g *Game) getPlayerGuessWithHints() (int, error) {
    // æ˜¾ç¤ºå½“å‰çŠ¶æ€
    if g.attempts > 0 {
        fmt.Printf("ç¬¬ %d æ¬¡çŒœæµ‹ ", g.attempts+1)
    }
    fmt.Print("è¯·è¾“å…¥ä½ çš„çŒœæµ‹ (1-100)ï¼š")
    
    if !g.scanner.Scan() {
        return 0, fmt.Errorf("è¯»å–è¾“å…¥å¤±è´¥")
    }
    
    input := strings.TrimSpace(g.scanner.Text())
    if input == "" {
        return 0, fmt.Errorf("è¾“å…¥ä¸èƒ½ä¸ºç©ºï¼Œè¯·è¾“å…¥ä¸€ä¸ª 1-100 ä¹‹é—´çš„æ•°å­—")
    }
    
    // æ£€æŸ¥æ˜¯å¦è¾“å…¥äº†å¸®åŠ©å‘½ä»¤
    if input == "help" || input == "?" {
        g.showHelp()
        return g.getPlayerGuessWithHints() // é€’å½’è°ƒç”¨é‡æ–°è·å–è¾“å…¥
    }
    
    guess, err := strconv.Atoi(input)
    if err != nil {
        return 0, fmt.Errorf("'%s' ä¸æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œè¯·è¾“å…¥ 1-100 ä¹‹é—´çš„æ•´æ•°", input)
    }
    
    if guess < 1 || guess > 100 {
        return 0, fmt.Errorf("%d è¶…å‡ºèŒƒå›´ï¼Œè¯·è¾“å…¥ 1-100 ä¹‹é—´çš„æ•°å­—", guess)
    }
    
    return guess, nil
}

// showHelp æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
func (g *Game) showHelp() {
    fmt.Println("\nğŸ“– æ¸¸æˆå¸®åŠ©ï¼š")
    fmt.Println("â€¢ è¾“å…¥ 1-100 ä¹‹é—´çš„æ•´æ•°")
    fmt.Println("â€¢ æ ¹æ®æç¤ºè°ƒæ•´ä¸‹æ¬¡çŒœæµ‹")
    fmt.Println("â€¢ è¾“å…¥ 'help' æˆ– '?' æŸ¥çœ‹å¸®åŠ©")
    fmt.Println()
}
```

## 7. å®Œæ•´çš„æ¸¸æˆé€»è¾‘

```go
// å®Œæ•´çš„ Start æ–¹æ³•å®ç°
func (g *Game) Start() {
    g.displayGameStart()
    
    for {
        guess, err := g.getPlayerGuessWithHints()
        if err != nil {
            fmt.Printf("âŒ %v\n", err)
            continue
        }
        
        g.attempts++
        result := g.checkGuess(guess)
        
        if result == 0 {
            g.displayGameEnd()
            break
        } else {
            g.provideFeedbackDetailed(guess, result)
        }
    }
}
```

## 8. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šæ·»åŠ éš¾åº¦çº§åˆ«
```go
type Difficulty int

const (
    Easy   Difficulty = iota // 1-50
    Medium                   // 1-100
    Hard                     // 1-200
)

func (g *Game) SetDifficulty(diff Difficulty) {
    switch diff {
    case Easy:
        g.targetNumber = rand.Intn(50) + 1
    case Medium:
        g.targetNumber = rand.Intn(100) + 1
    case Hard:
        g.targetNumber = rand.Intn(200) + 1
    }
}
```

### ç»ƒä¹ 2ï¼šæ·»åŠ æç¤ºåŠŸèƒ½
```go
func (g *Game) giveHint() {
    if g.attempts >= 5 {
        if g.targetNumber%2 == 0 {
            fmt.Println("ğŸ’¡ æç¤ºï¼šç›®æ ‡æ•°å­—æ˜¯å¶æ•°")
        } else {
            fmt.Println("ğŸ’¡ æç¤ºï¼šç›®æ ‡æ•°å­—æ˜¯å¥‡æ•°")
        }
    }
}
```

## å°ç»“

æœ¬ç« å®ç°äº†çŒœæ•°å­—æ¸¸æˆçš„æ ¸å¿ƒé€»è¾‘ï¼š

1. **éšæœºæ•°ç”Ÿæˆ**ï¼šæ­£ç¡®è®¾ç½®ç§å­ï¼Œç”Ÿæˆéšæœºç›®æ ‡æ•°å­—
2. **æ¸¸æˆä¸»å¾ªç¯**ï¼šå®ç°å®Œæ•´çš„æ¸¸æˆæµç¨‹æ§åˆ¶
3. **è¾“å…¥éªŒè¯**ï¼šå¤šå±‚æ¬¡çš„è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
4. **çŠ¶æ€ç®¡ç†**ï¼šæ¸¸æˆçŠ¶æ€çš„æ£€æŸ¥å’Œåé¦ˆ
5. **ç”¨æˆ·ä½“éªŒ**ï¼šå‹å¥½çš„ç•Œé¢å’Œæç¤ºä¿¡æ¯

è¿™äº›æ ¸å¿ƒé€»è¾‘æ„æˆäº†ä¸€ä¸ªå®Œæ•´ã€å¥å£®çš„çŒœæ•°å­—æ¸¸æˆã€‚

## ä¸‹ä¸€æ­¥

ç»§ç»­å­¦ä¹ ï¼š[05-ç”¨æˆ·äº¤äº’ä¸é”™è¯¯å¤„ç†.md](./05-ç”¨æˆ·äº¤äº’ä¸é”™è¯¯å¤„ç†.md)

åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ ç”¨æˆ·äº¤äº’è®¾è®¡å’Œé«˜çº§é”™è¯¯å¤„ç†æŠ€å·§ã€‚
