# ğŸ—ï¸ æ ¸å¿ƒæ•°æ®ç»“æ„è®¾è®¡

æœ¬ç« å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Go è¯­è¨€çš„ç»“æ„ä½“ï¼ˆstructï¼‰æ¥è®¾è®¡çŒœæ•°å­—æ¸¸æˆçš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚

## 1. ç»“æ„ä½“åŸºç¡€

### ä»€ä¹ˆæ˜¯ç»“æ„ä½“ï¼Ÿ
ç»“æ„ä½“æ˜¯ Go è¯­è¨€ä¸­ç”¨äºç»„ç»‡ç›¸å…³æ•°æ®çš„å¤åˆç±»å‹ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»ï¼ˆclassï¼‰ã€‚

```go
// åŸºæœ¬ç»“æ„ä½“å®šä¹‰
type Person struct {
    Name string
    Age  int
}

// åˆ›å»ºç»“æ„ä½“å®ä¾‹
var p1 Person
p1.Name = "å¼ ä¸‰"
p1.Age = 25

// ç»“æ„ä½“å­—é¢é‡åˆå§‹åŒ–
p2 := Person{
    Name: "æå››",
    Age:  30,
}

// ç®€çŸ­åˆå§‹åŒ–ï¼ˆæŒ‰å­—æ®µé¡ºåºï¼‰
p3 := Person{"ç‹äº”", 28}
```

### ç»“æ„ä½“æŒ‡é’ˆ
```go
// åˆ›å»ºç»“æ„ä½“æŒ‡é’ˆ
p := &Person{Name: "èµµå…­", Age: 35}

// é€šè¿‡æŒ‡é’ˆè®¿é—®å­—æ®µï¼ˆGo ä¼šè‡ªåŠ¨è§£å¼•ç”¨ï¼‰
fmt.Println(p.Name)  // ç­‰ä»·äº (*p).Name

// ä½¿ç”¨ new åˆ›å»º
p2 := new(Person)
p2.Name = "é’±ä¸ƒ"
```

## 2. æ¸¸æˆç»“æ„ä½“è®¾è®¡

### åˆ†ææ¸¸æˆéœ€æ±‚
åœ¨è®¾è®¡ç»“æ„ä½“ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ†ææ¸¸æˆéœ€è¦ç®¡ç†å“ªäº›æ•°æ®ï¼š

1. **ç›®æ ‡æ•°å­—**ï¼šæ¸¸æˆç”Ÿæˆçš„éšæœºæ•°
2. **çŒœæµ‹æ¬¡æ•°**ï¼šç©å®¶å·²ç»çŒœæµ‹çš„æ¬¡æ•°
3. **è¾“å…¥å¤„ç†å™¨**ï¼šç”¨äºè¯»å–ç”¨æˆ·è¾“å…¥
4. **æ¸¸æˆçŠ¶æ€**ï¼šæ¸¸æˆæ˜¯å¦ç»“æŸç­‰

### Game ç»“æ„ä½“è®¾è®¡
```go
package main

import (
    "bufio"
    "os"
)

// Game ç»“æ„ä½“ç”¨äºç®¡ç†æ¸¸æˆçŠ¶æ€
type Game struct {
    targetNumber int           // ç›®æ ‡æ•°å­—ï¼ˆç§æœ‰å­—æ®µï¼‰
    attempts     int           // çŒœæµ‹æ¬¡æ•°ï¼ˆç§æœ‰å­—æ®µï¼‰
    scanner      *bufio.Scanner // è¾“å…¥æ‰«æå™¨ï¼ˆç§æœ‰å­—æ®µï¼‰
}
```

### å­—æ®µè®¾è®¡è¯´æ˜

1. **å­—æ®µå‘½åè§„èŒƒ**
   - å°å†™å­—æ¯å¼€å¤´ï¼šç§æœ‰å­—æ®µï¼Œåªèƒ½åœ¨åŒ…å†…è®¿é—®
   - å¤§å†™å­—æ¯å¼€å¤´ï¼šå…¬æœ‰å­—æ®µï¼Œå¯ä»¥è¢«å…¶ä»–åŒ…è®¿é—®

2. **å­—æ®µç±»å‹é€‰æ‹©**
   - `targetNumber int`ï¼šæ•´æ•°ç±»å‹ï¼Œå­˜å‚¨ 1-100 çš„éšæœºæ•°
   - `attempts int`ï¼šæ•´æ•°ç±»å‹ï¼Œè®°å½•çŒœæµ‹æ¬¡æ•°
   - `scanner *bufio.Scanner`ï¼šæŒ‡é’ˆç±»å‹ï¼Œç”¨äºé«˜æ•ˆçš„è¾“å…¥å¤„ç†

## 3. æ„é€ å‡½æ•°è®¾è®¡

Go è¯­è¨€æ²¡æœ‰å†…ç½®çš„æ„é€ å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥åˆ›å»ºå·¥å‚å‡½æ•°æ¥åˆå§‹åŒ–ç»“æ„ä½“ã€‚

### NewGame æ„é€ å‡½æ•°
```go
import (
    "bufio"
    "math/rand"
    "os"
    "time"
)

// NewGame åˆ›å»ºæ–°æ¸¸æˆå®ä¾‹
func NewGame() *Game {
    // è®¾ç½®éšæœºæ•°ç§å­ï¼ˆç¡®ä¿æ¯æ¬¡è¿è¡Œäº§ç”Ÿä¸åŒçš„éšæœºæ•°ï¼‰
    rand.Seed(time.Now().UnixNano())
    
    return &Game{
        targetNumber: rand.Intn(100) + 1, // ç”Ÿæˆ 1-100 ä¹‹é—´çš„éšæœºæ•°
        attempts:     0,                   // åˆå§‹çŒœæµ‹æ¬¡æ•°ä¸º 0
        scanner:      bufio.NewScanner(os.Stdin), // åˆ›å»ºæ ‡å‡†è¾“å…¥æ‰«æå™¨
    }
}
```

### æ„é€ å‡½æ•°è®¾è®¡è¦ç‚¹

1. **è¿”å›æŒ‡é’ˆ**ï¼šè¿”å› `*Game` è€Œä¸æ˜¯ `Game`ï¼Œé¿å…å¤§ç»“æ„ä½“çš„å€¼æ‹·è´
2. **åˆå§‹åŒ–æ‰€æœ‰å­—æ®µ**ï¼šç¡®ä¿ç»“æ„ä½“å¤„äºæœ‰æ•ˆçŠ¶æ€
3. **éšæœºæ•°ç§å­**ï¼šä½¿ç”¨å½“å‰æ—¶é—´ä½œä¸ºç§å­ï¼Œç¡®ä¿éšæœºæ€§
4. **èµ„æºç®¡ç†**ï¼šåˆå§‹åŒ–éœ€è¦çš„å¤–éƒ¨èµ„æºï¼ˆå¦‚è¾“å…¥æ‰«æå™¨ï¼‰

## 4. æ–¹æ³•å®šä¹‰

### æ–¹æ³• vs å‡½æ•°
- **å‡½æ•°**ï¼šç‹¬ç«‹çš„ä»£ç å—
- **æ–¹æ³•**ï¼šä¸ç‰¹å®šç±»å‹å…³è”çš„å‡½æ•°

```go
// å‡½æ•°
func checkGuess(target, guess int) int {
    // ...
}

// æ–¹æ³•
func (g *Game) checkGuess(guess int) int {
    // ...
}
```

### æ¥æ”¶è€…ç±»å‹é€‰æ‹©

#### å€¼æ¥æ”¶è€… vs æŒ‡é’ˆæ¥æ”¶è€…
```go
// å€¼æ¥æ”¶è€…ï¼šæ¥æ”¶ç»“æ„ä½“çš„å‰¯æœ¬
func (g Game) GetAttempts() int {
    return g.attempts  // åªè¯»æ“ä½œï¼Œä½¿ç”¨å€¼æ¥æ”¶è€…
}

// æŒ‡é’ˆæ¥æ”¶è€…ï¼šæ¥æ”¶ç»“æ„ä½“çš„æŒ‡é’ˆ
func (g *Game) IncrementAttempts() {
    g.attempts++  // ä¿®æ”¹æ“ä½œï¼Œä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…
}
```

#### é€‰æ‹©åŸåˆ™
- **ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…çš„æƒ…å†µ**ï¼š
  - éœ€è¦ä¿®æ”¹ç»“æ„ä½“å­—æ®µ
  - ç»“æ„ä½“è¾ƒå¤§ï¼Œé¿å…æ‹·è´å¼€é”€
  - ä¿æŒæ–¹æ³•é›†çš„ä¸€è‡´æ€§

- **ä½¿ç”¨å€¼æ¥æ”¶è€…çš„æƒ…å†µ**ï¼š
  - åªè¯»æ“ä½œ
  - ç»“æ„ä½“å¾ˆå°
  - éœ€è¦å¹¶å‘å®‰å…¨æ€§

## 5. æ ¸å¿ƒæ–¹æ³•å®ç°

### checkGuess æ–¹æ³•
```go
// checkGuess æ£€æŸ¥çŒœæµ‹ç»“æœ
// è¿”å›å€¼ï¼š0 è¡¨ç¤ºçŒœå¯¹ï¼Œæ­£æ•°è¡¨ç¤ºçŒœå¤§äº†ï¼Œè´Ÿæ•°è¡¨ç¤ºçŒœå°äº†
func (g *Game) checkGuess(guess int) int {
    if guess == g.targetNumber {
        return 0  // çŒœå¯¹äº†
    } else if guess > g.targetNumber {
        return 1  // çŒœå¤§äº†
    } else {
        return -1 // çŒœå°äº†
    }
}
```

### getPlayerGuess æ–¹æ³•
```go
import (
    "fmt"
    "strconv"
    "strings"
)

// getPlayerGuess è·å–ç©å®¶çš„çŒœæµ‹è¾“å…¥
func (g *Game) getPlayerGuess() (int, error) {
    fmt.Print("è¯·è¾“å…¥ä½ çš„çŒœæµ‹ï¼š")
    
    // è¯»å–ä¸€è¡Œè¾“å…¥
    if !g.scanner.Scan() {
        return 0, fmt.Errorf("è¯»å–è¾“å…¥å¤±è´¥")
    }
    
    // è·å–è¾“å…¥æ–‡æœ¬å¹¶å»é™¤é¦–å°¾ç©ºæ ¼
    input := strings.TrimSpace(g.scanner.Text())
    if input == "" {
        return 0, fmt.Errorf("è¾“å…¥ä¸èƒ½ä¸ºç©º")
    }
    
    // è½¬æ¢ä¸ºæ•´æ•°
    guess, err := strconv.Atoi(input)
    if err != nil {
        return 0, fmt.Errorf("è¯·è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—")
    }
    
    // éªŒè¯æ•°å­—èŒƒå›´
    if guess < 1 || guess > 100 {
        return 0, fmt.Errorf("æ•°å­—å¿…é¡»åœ¨ 1-100 ä¹‹é—´")
    }
    
    return guess, nil
}
```

## 6. å®Œæ•´çš„ç»“æ„ä½“è®¾è®¡

```go
package main

import (
    "bufio"
    "fmt"
    "math/rand"
    "os"
    "strconv"
    "strings"
    "time"
)

// Game ç»“æ„ä½“ç”¨äºç®¡ç†æ¸¸æˆçŠ¶æ€
type Game struct {
    targetNumber int           // ç›®æ ‡æ•°å­—
    attempts     int           // çŒœæµ‹æ¬¡æ•°
    scanner      *bufio.Scanner // è¾“å…¥æ‰«æå™¨
}

// NewGame åˆ›å»ºæ–°æ¸¸æˆå®ä¾‹
func NewGame() *Game {
    rand.Seed(time.Now().UnixNano())
    
    return &Game{
        targetNumber: rand.Intn(100) + 1,
        attempts:     0,
        scanner:      bufio.NewScanner(os.Stdin),
    }
}

// GetAttempts è·å–çŒœæµ‹æ¬¡æ•°ï¼ˆåªè¯»æ–¹æ³•ï¼Œä½¿ç”¨å€¼æ¥æ”¶è€…ï¼‰
func (g Game) GetAttempts() int {
    return g.attempts
}

// IncrementAttempts å¢åŠ çŒœæµ‹æ¬¡æ•°ï¼ˆä¿®æ”¹æ–¹æ³•ï¼Œä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼‰
func (g *Game) IncrementAttempts() {
    g.attempts++
}

// checkGuess æ£€æŸ¥çŒœæµ‹ç»“æœ
func (g *Game) checkGuess(guess int) int {
    if guess == g.targetNumber {
        return 0
    } else if guess > g.targetNumber {
        return 1
    } else {
        return -1
    }
}

// getPlayerGuess è·å–ç©å®¶çš„çŒœæµ‹è¾“å…¥
func (g *Game) getPlayerGuess() (int, error) {
    fmt.Print("è¯·è¾“å…¥ä½ çš„çŒœæµ‹ï¼š")
    
    if !g.scanner.Scan() {
        return 0, fmt.Errorf("è¯»å–è¾“å…¥å¤±è´¥")
    }
    
    input := strings.TrimSpace(g.scanner.Text())
    if input == "" {
        return 0, fmt.Errorf("è¾“å…¥ä¸èƒ½ä¸ºç©º")
    }
    
    guess, err := strconv.Atoi(input)
    if err != nil {
        return 0, fmt.Errorf("è¯·è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—")
    }
    
    if guess < 1 || guess > 100 {
        return 0, fmt.Errorf("æ•°å­—å¿…é¡»åœ¨ 1-100 ä¹‹é—´")
    }
    
    return guess, nil
}
```

## 7. è®¾è®¡æ¨¡å¼åº”ç”¨

### å°è£…ï¼ˆEncapsulationï¼‰
```go
// ç§æœ‰å­—æ®µï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®
type Game struct {
    targetNumber int  // å°å†™å¼€å¤´ï¼Œç§æœ‰
    attempts     int  // å°å†™å¼€å¤´ï¼Œç§æœ‰
}

// æä¾›å…¬æœ‰æ–¹æ³•è®¿é—®ç§æœ‰æ•°æ®
func (g *Game) GetTargetNumber() int {
    return g.targetNumber  // ä»…ç”¨äºæµ‹è¯•ï¼Œå®é™…æ¸¸æˆä¸­ä¸åº”æš´éœ²
}
```

### å•ä¸€èŒè´£åŸåˆ™
æ¯ä¸ªæ–¹æ³•åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ï¼š
- `NewGame()`ï¼šåˆ›å»ºæ¸¸æˆå®ä¾‹
- `checkGuess()`ï¼šæ£€æŸ¥çŒœæµ‹ç»“æœ
- `getPlayerGuess()`ï¼šè·å–ç”¨æˆ·è¾“å…¥

## 8. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šæ‰©å±• Game ç»“æ„ä½“
ä¸ºæ¸¸æˆæ·»åŠ æ›´å¤šåŠŸèƒ½ï¼š

```go
type Game struct {
    targetNumber int
    attempts     int
    maxAttempts  int           // æœ€å¤§çŒœæµ‹æ¬¡æ•°
    playerName   string        // ç©å®¶å§“å
    startTime    time.Time     // æ¸¸æˆå¼€å§‹æ—¶é—´
    scanner      *bufio.Scanner
}

// æ·»åŠ ç›¸åº”çš„æ–¹æ³•
func (g *Game) IsGameOver() bool {
    return g.attempts >= g.maxAttempts
}

func (g *Game) GetElapsedTime() time.Duration {
    return time.Since(g.startTime)
}
```

### ç»ƒä¹ 2ï¼šåˆ›å»ºæ¸¸æˆç»Ÿè®¡ç»“æ„ä½“
```go
type GameStats struct {
    TotalGames   int
    TotalWins    int
    BestAttempts int
    AverageAttempts float64
}

func (gs *GameStats) AddGame(attempts int, won bool) {
    gs.TotalGames++
    if won {
        gs.TotalWins++
        if gs.BestAttempts == 0 || attempts < gs.BestAttempts {
            gs.BestAttempts = attempts
        }
    }
    // è®¡ç®—å¹³å‡çŒœæµ‹æ¬¡æ•°çš„é€»è¾‘...
}
```

## å°ç»“

æœ¬ç« å­¦ä¹ äº†ï¼š

1. **ç»“æ„ä½“åŸºç¡€**ï¼šå®šä¹‰ã€åˆå§‹åŒ–å’Œä½¿ç”¨
2. **æ¸¸æˆç»“æ„ä½“è®¾è®¡**ï¼šåˆ†æéœ€æ±‚ï¼Œè®¾è®¡åˆç†çš„æ•°æ®ç»“æ„
3. **æ„é€ å‡½æ•°æ¨¡å¼**ï¼šä½¿ç”¨å·¥å‚å‡½æ•°åˆå§‹åŒ–ç»“æ„ä½“
4. **æ–¹æ³•å®šä¹‰**ï¼šå€¼æ¥æ”¶è€… vs æŒ‡é’ˆæ¥æ”¶è€…çš„é€‰æ‹©
5. **å°è£…åŸåˆ™**ï¼šé€šè¿‡ç§æœ‰å­—æ®µå’Œå…¬æœ‰æ–¹æ³•å®ç°æ•°æ®å°è£…

è‰¯å¥½çš„æ•°æ®ç»“æ„è®¾è®¡æ˜¯ç¨‹åºæˆåŠŸçš„åŸºç¡€ï¼Œå®ƒèƒ½è®©ä»£ç æ›´åŠ æ¸…æ™°ã€å¯ç»´æŠ¤å’Œå¯æ‰©å±•ã€‚

## ä¸‹ä¸€æ­¥

ç»§ç»­å­¦ä¹ ï¼š[04-æ¸¸æˆé€»è¾‘å®ç°.md](./04-æ¸¸æˆé€»è¾‘å®ç°.md)

åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°å®Œæ•´çš„æ¸¸æˆé€»è¾‘ï¼ŒåŒ…æ‹¬æ¸¸æˆä¸»å¾ªç¯å’Œæ ¸å¿ƒç®—æ³•ã€‚
